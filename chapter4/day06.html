<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>day06 | 尚品汇商城-前台PC</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" type="image/x-icon" href="/gshop-client_docs/favicon.ico">
    <meta name="description" content="尚硅谷前端研究院">
    
    <link rel="preload" href="/gshop-client_docs/assets/css/0.styles.9c560553.css" as="style"><link rel="preload" href="/gshop-client_docs/assets/js/app.c43e50ec.js" as="script"><link rel="preload" href="/gshop-client_docs/assets/js/2.1de92273.js" as="script"><link rel="preload" href="/gshop-client_docs/assets/js/45.b43ed76f.js" as="script"><link rel="prefetch" href="/gshop-client_docs/assets/js/10.07a23df4.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/11.02ee39bd.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/12.c38725e9.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/13.9edd8cf7.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/14.fe74ac8e.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/15.ec062ec6.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/16.1525faa7.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/17.920d929c.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/18.72c43d3e.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/19.4649b5f9.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/20.0b56d2eb.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/21.2666e8d6.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/22.abde6a23.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/23.f76fedab.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/24.ba1b64d4.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/25.b63afa39.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/26.fc57e77b.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/27.4fc8d899.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/28.434fb1e3.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/29.562c4b8b.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/3.e5c7338a.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/30.7239eddc.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/31.4f6530ae.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/32.45848c64.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/33.fe462830.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/34.55d87fdc.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/35.c983e407.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/36.1995ed2e.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/37.fef5d58c.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/38.a37bbe63.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/39.fca5c169.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/4.8aadd252.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/40.8f12b800.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/41.d01d1780.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/42.c98b791b.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/43.b878f56c.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/44.1ceb34d4.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/46.31d35044.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/47.52bcd8d8.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/48.0073dc5b.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/49.5a5bf754.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/5.fcf84bff.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/50.b9fc5233.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/6.af80b6c9.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/7.d7840388.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/8.76f24d23.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/9.4ca87000.js">
    <link rel="stylesheet" href="/gshop-client_docs/assets/css/0.styles.9c560553.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gshop-client_docs/" class="home-link router-link-active"><img src="/gshop-client_docs/logo.png" alt="尚品汇商城-前台PC" class="logo"> <span class="site-name can-hide">尚品汇商城-前台PC</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.atguigu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://www.gulixueyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  谷粒学院
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><span class="title">学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习路线" class="mobile-dropdown-title"><span class="title">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/web/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/kecheng.shtml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/bigdata/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大数据
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.atguigu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://www.gulixueyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  谷粒学院
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><span class="title">学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习路线" class="mobile-dropdown-title"><span class="title">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/web/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/kecheng.shtml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/bigdata/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大数据
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/gshop-client_docs/chapter1/01_准备.html" class="sidebar-link">项目开发前准备</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>应用开发详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>相关文档</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>笔记列表</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gshop-client_docs/chapter4/每日编码任务与面试题.html" class="sidebar-link">每日编码任务与面试题</a></li><li><a href="/gshop-client_docs/chapter4/day01.html" class="sidebar-link">day01</a></li><li><a href="/gshop-client_docs/chapter4/day02.html" class="sidebar-link">day02</a></li><li><a href="/gshop-client_docs/chapter4/day03.html" class="sidebar-link">day03</a></li><li><a href="/gshop-client_docs/chapter4/day04.html" class="sidebar-link">day04</a></li><li><a href="/gshop-client_docs/chapter4/day05.html" class="sidebar-link">day05</a></li><li><a href="/gshop-client_docs/chapter4/day06.html" aria-current="page" class="active sidebar-link">day06</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#今日任务" class="sidebar-link">今日任务</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#加入购物车" class="sidebar-link">加入购物车</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#如何实现-dispatch异步action完成-成功-失败-后-再去做某些操作-提示-跳转" class="sidebar-link">如何实现: dispatch异步action完成(成功/失败)后, 再去做某些操作(提示/跳转)</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#addcartsuccess路由组件" class="sidebar-link">AddCartSuccess路由组件</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#sessionstorage与localstorage的区别" class="sidebar-link">sessionStorage与localStorage的区别</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#显示购物车数据" class="sidebar-link">显示购物车数据</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#用户临时id" class="sidebar-link">用户临时ID</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#勾选-不勾选某个商品-改变某个购物项商品的勾选状态" class="sidebar-link">勾选/不勾选某个商品 / 改变某个购物项商品的勾选状态</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#全选或全选" class="sidebar-link">全选或全选</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#修改商品数量" class="sidebar-link">修改商品数量</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#删除某个商品-独立完成" class="sidebar-link">删除某个商品 (独立完成)</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#删除所有选中商品-独立完成" class="sidebar-link">删除所有选中商品(独立完成)</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter4/day06.html#输入框的几个事件处理" class="sidebar-link">输入框的几个事件处理</a></li></ul></li><li><a href="/gshop-client_docs/chapter4/day07.html" class="sidebar-link">day07</a></li><li><a href="/gshop-client_docs/chapter4/day08.html" class="sidebar-link">day08</a></li><li><a href="/gshop-client_docs/chapter4/day09.html" class="sidebar-link">day09</a></li><li><a href="/gshop-client_docs/chapter4/项目总结.html" class="sidebar-link">项目总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="day06"><a href="#day06" class="header-anchor">#</a> day06</h1> <h2 id="今日任务"><a href="#今日任务" class="header-anchor">#</a> 今日任务</h2> <div class="language- extra-class"><pre><code>1). 加入购物车
2). AddCartSuccess(添加购物车成功)路由组件
3). ShopCart(购物车)路由组件
	1). 动态显示购物车列表
	2). 勾选/不勾选某个商品 / 改变某个购物项商品的勾选状态
	3). 全选或全不选
	4). 修改商品数量
	5). 删除某个商品
	6). 删除所有选中商品
</code></pre></div><h2 id="加入购物车"><a href="#加入购物车" class="header-anchor">#</a> 加入购物车</h2> <div class="language- extra-class"><pre><code>api: reqAddToCart()
vuex: addToCart()
component:
	收集数据
	dispatch()
	如果成功了, 跳转到成功的路由
	如果失败了, 提示
</code></pre></div><h2 id="如何实现-dispatch异步action完成-成功-失败-后-再去做某些操作-提示-跳转"><a href="#如何实现-dispatch异步action完成-成功-失败-后-再去做某些操作-提示-跳转" class="header-anchor">#</a> 如何实现: dispatch异步action完成(成功/失败)后, 再去做某些操作(提示/跳转)</h2> <div class="language- extra-class"><pre><code>方式一: 使用回调函数数据  (可以不写)
	component:
		dispatch('addToCart', {callback: this.callback}) 
		callback(errorMsg) {// 根据errorMsg是否有值来做相应处理}
	action:
		发异步ajax请求
		如果成功了, 执行callback()
		如果失败了, 执行callback('错误提示文本')
方式二: 利用dispatch()的返回值是promise
	async函数执行的返回是promise, promise的结果由什么决定?
		函数体执行抛出了异常  ==&gt; 失败, reason就是抛出的异常
		函数体执行返回一个失败的promise ==&gt; 失败, reason就是返回的promise的reason
		函数体执行返回一个成功的promise ==&gt; 成功, value就是返回的promise的value
		函数体执行返回其它任意值 ==&gt; 成功, value就是返回的值
	dispatch()的返回值是promise, 就是异步action执行返回的promise
		component:
			const promise = dispatch('addToCart', {})
			如果promise是成功的, 做成功的处理    await后面
			如果promise是失败的, 做失败的处理    try...catch
		action:
			发异步ajax请
			请求操作失败抛出错误  ===&gt; 请求操作失败时action的promise是失败的, 请求操作成功action的promise是成功的
</code></pre></div><h2 id="addcartsuccess路由组件"><a href="#addcartsuccess路由组件" class="header-anchor">#</a> AddCartSuccess路由组件</h2> <div class="language- extra-class"><pre><code>使用本地的iconfont
跳转路由携带数据:
	query/params参数: 刷新数据还在, 不能携带对象数据
	vuex: 在跳转前保存到vuex的state中: 可以传递任意类型的数据, 刷新数据不在了
	sessionStorage与localStorage: 可以利用它们携带基本或对象类型数据, 刷新数据还存在
</code></pre></div><h2 id="sessionstorage与localstorage的区别"><a href="#sessionstorage与localstorage的区别" class="header-anchor">#</a> sessionStorage与localStorage的区别</h2> <div class="language- extra-class"><pre><code>相同点:
	都是window上的属性对象
	保存的数据刷新都存在
	语法: setItem(key, value)/getItem(key)/removeItem(key)/clear()  key是标识名称, value是json字符串
	都纯浏览器端的存储, 请求时不会自动携带(区别于cookie)
不同点:
	localStorage: 数据保存在浏览器管理的本地文件中, 刷新或关闭浏览器, 数据依然还在
	sessionStorage: 数据保存在浏览器的运行内存中, 刷新浏览器数据还在, 但关闭浏览器数据不在(浏览器关闭后可能在后台运行)
</code></pre></div><h2 id="显示购物车数据"><a href="#显示购物车数据" class="header-anchor">#</a> 显示购物车数据</h2> <div class="language- extra-class"><pre><code>api: reqShopCart()
vuex: shopCart.js:
	state: cartList
	mutations:RECEIVE_CART_LIST()
	actions: getCartList()
	getters: totalCount / totalPrice / isAllChecked
component:
	dispatch()
	mapState()
	模板
问题: 请求获取不到购物列表数据
疑问: 服务器端如何识别不同的浏览器
解决: 通过用户临时ID的请求头标识
</code></pre></div><h2 id="用户临时id"><a href="#用户临时id" class="header-anchor">#</a> 用户临时ID</h2> <div class="language- extra-class"><pre><code>作用: 用来标识某个浏览器客户端的唯一标识字符串  'b2f79046-7ee6-4dbf-88d0-725b1045460b'
特点:
	不同的浏览器访问产生的值肯定不一样, 同一个浏览器多次产生也不样
	浏览器端生成, 并保存在浏览器端, 每次请求都会通过请求头来携带给服务器端
	服务器端保存购物车数据时是以它为标识保存
创建:
	使用uuid/uuidjs工具库生成
	import { v4 as uuidv4 } from 'uuid';
	uuidv4(); // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'
保存:
	localStorage: 以USER_TEMP_ID_KEY为key保存  ==&gt; 关闭浏览/电脑后再打开数据依然存在
	vuex的state中: 保存到user模块中的userTempId状态中  ==&gt; 不用多次从localStorage中读取
使用:
	每个请求自动携带userTempId的请求头: 在请求拦截器中实现
</code></pre></div><h2 id="勾选-不勾选某个商品-改变某个购物项商品的勾选状态"><a href="#勾选-不勾选某个商品-改变某个购物项商品的勾选状态" class="header-anchor">#</a> 勾选/不勾选某个商品 / 改变某个购物项商品的勾选状态</h2> <div class="language- extra-class"><pre><code>api: reqCheckCartItem (skuId, isChecked)
	skuId: 商品的ID
	isChecked: 商品选中状态, '0'代表不选中, '1'代表选中
vuex: checkCartItem({commit}, {skuId, isChecked})
component:
	在change事件回调中, 分发触发checkCartItem action调用  ===&gt; 发请求
	如果失败了, 提示
	如果成功了, 重新获取购物车数据显示
</code></pre></div><h2 id="全选或全选"><a href="#全选或全选" class="header-anchor">#</a> 全选或全选</h2> <div class="language- extra-class"><pre><code>api: 没有对应的接口, 得使用reqCheckCartItem(skuId, isChecked)
vuex: checkAllCartItems(context, data)
	1). 需要对所有购物项与checked不一致的购物项发送请求
	2). 针对每个需要发请求的item去触发checkCartItem()调用  ===&gt; 调用dispatch()
	3). context对象的结构:
	  {
	    state,      // 等同于 `store.state`，若在模块中则为局部状态
	    getters,    // 等同于 `store.getters`
	    commit,     // 等同于 `store.commit`
	    dispatch,   // 等同于 `store.dispatch`
	  }
	4). 执行多个请求的异步操作, 只有当都成功时, 整体异步action才成功, 否则失败
	  const promise = Promise.all([p1, p2, p3])
component:
	对应setter方法中, 分发触发checkAllCartItems action调用  ===&gt; 发请求
	如果失败了, 提示
	如果成功了, 重新获取购物车数据显示
</code></pre></div><h2 id="修改商品数量"><a href="#修改商品数量" class="header-anchor">#</a> 修改商品数量</h2> <div class="language- extra-class"><pre><code>api: reqAddToCart(skuId, skuNum)
	skuId: 商品ID
	skuNum: 商品数量, 正数代表增加, 负数代表减少
vuex: 
	addToCart({commit}, {skuId, skuNum})
component: 
	绑定click与change事件
	在vue中和原生DOM中的input输入框
        input事件: 输入改变时触发
        change事件: 失去焦点改变才触发
	在change事件调用多输入了一个$event参数
	在事件回调函数分异步action发更新数量的请求
	对数量要进行判断限制
</code></pre></div><h2 id="删除某个商品-独立完成"><a href="#删除某个商品-独立完成" class="header-anchor">#</a> 删除某个商品 (独立完成)</h2> <h2 id="删除所有选中商品-独立完成"><a href="#删除所有选中商品-独立完成" class="header-anchor">#</a> 删除所有选中商品(独立完成)</h2> <h2 id="输入框的几个事件处理"><a href="#输入框的几个事件处理" class="header-anchor">#</a> 输入框的几个事件处理</h2> <div class="language- extra-class"><pre><code>4个事件监听
	input事件: 输入改变时触发
	keyup事件: 按键起来时触发
    change事件: 失去焦点且有改变时触发
	blur事件: 失去焦点时触发
3种输入方式:
	键盘单字符输入
	通过 CTRL + C 粘贴输入
	通过 鼠标右键粘贴输入
@input=&quot;validInput&quot;: 
  	三种方式都能监听, 输入非法字符不会有输入变化, 粘贴时已自动去掉非法字符
@keyup=&quot;validInput&quot; 
  	不能监视鼠标右键方式, 输入非法字符显示后再自动删除, 粘贴时显示后再自动删除非法字符
通过正则限制输入
	目标: 将输入框中的开头的n个0或者n个非数字替换为空串
	正则: /^0+|\D+0*/g : 匹配 开头的1+个0 或者 任意位置的1+个非数字及后面0+个0
		\D 代表非数字 
		+ 代表个数&gt;=1
		* 代表个数&gt;=0
		? 代表0/1个
		| 或者
		g 找出所有匹配的
	测试文本: -0a011a0110  替换后变为 11110</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/gshop-client_docs/chapter4/day05.html" class="prev">
        day05
      </a></span> <span class="next"><a href="/gshop-client_docs/chapter4/day07.html">
        day07
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gshop-client_docs/assets/js/app.c43e50ec.js" defer></script><script src="/gshop-client_docs/assets/js/2.1de92273.js" defer></script><script src="/gshop-client_docs/assets/js/45.b43ed76f.js" defer></script>
  </body>
</html>
