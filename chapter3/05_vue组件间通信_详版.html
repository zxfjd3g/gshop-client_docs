<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件间通信详解 | 尚品汇商城-前台PC</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="shortcut icon" type="image/x-icon" href="/gshop-client_docs/favicon.ico">
    <meta name="description" content="尚硅谷前端研究院">
    
    <link rel="preload" href="/gshop-client_docs/assets/css/0.styles.9c560553.css" as="style"><link rel="preload" href="/gshop-client_docs/assets/js/app.6cbae8ec.js" as="script"><link rel="preload" href="/gshop-client_docs/assets/js/2.f8b636a9.js" as="script"><link rel="preload" href="/gshop-client_docs/assets/js/39.a7e2c68a.js" as="script"><link rel="prefetch" href="/gshop-client_docs/assets/js/10.4c149b68.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/11.fe2ccf2d.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/12.853857b0.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/13.f2278d7a.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/14.a894e7eb.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/15.0777dc22.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/16.3fafc621.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/17.3618caae.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/18.fa1194e4.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/19.76f16ac7.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/20.465dfdd6.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/21.1ec7c3ea.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/22.bd96c008.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/23.fd6b72de.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/24.08e25c6f.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/25.6d63e825.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/26.d5feead5.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/27.b7eb0cfb.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/28.a27bb391.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/29.23aedcca.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/3.6e3a2ee5.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/30.510610c0.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/31.fcd9d036.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/32.761afe67.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/33.94993c7a.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/34.ac7c9952.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/35.bd2c1c6f.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/36.cc5d1633.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/37.fc8f3af1.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/38.db3087cb.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/4.7315c3ff.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/40.3127bc12.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/41.6eb35232.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/42.d45750a0.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/43.fd3ec932.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/44.8be5cf5c.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/45.e9738034.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/46.1480b291.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/47.f981d764.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/48.89c215cb.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/5.ebeba0fa.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/6.99ff8bf6.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/7.d9c80f2c.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/8.981a2519.js"><link rel="prefetch" href="/gshop-client_docs/assets/js/9.3822ad5e.js">
    <link rel="stylesheet" href="/gshop-client_docs/assets/css/0.styles.9c560553.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gshop-client_docs/" class="home-link router-link-active"><img src="/gshop-client_docs/logo.png" alt="尚品汇商城-前台PC" class="logo"> <span class="site-name can-hide">尚品汇商城-前台PC</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.atguigu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://www.gulixueyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  谷粒学院
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><span class="title">学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习路线" class="mobile-dropdown-title"><span class="title">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/web/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/kecheng.shtml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/bigdata/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大数据
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.atguigu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://www.gulixueyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  谷粒学院
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习路线" class="dropdown-title"><span class="title">学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习路线" class="mobile-dropdown-title"><span class="title">学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/web/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/kecheng.shtml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.atguigu.com/bigdata/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大数据
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/gshop-client_docs/chapter1/01_准备.html" class="sidebar-link">项目开发前准备</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>应用开发详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>相关文档</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gshop-client_docs/chapter3/01_API.html" class="sidebar-link">接口文档(前台PC)</a></li><li><a href="/gshop-client_docs/chapter3/02_Swagger接口列表.html" class="sidebar-link">Swagger接口列表</a></li><li><a href="/gshop-client_docs/chapter3/03_VuePress.html" class="sidebar-link">使用VuePress搭建在线文档网站</a></li><li><a href="/gshop-client_docs/chapter3/04_vee-validate 2.x.html" class="sidebar-link">vee-validate 2.x使用教程</a></li><li><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html" class="active sidebar-link">组件间通信详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_1-组件间多种通信方式" class="sidebar-link">1. 组件间多种通信方式:</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_2-组件间通信最基本方式-props" class="sidebar-link">2. 组件间通信最基本方式: props</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_3-组件间通信2-vue自定义事件" class="sidebar-link">3. 组件间通信2: vue自定义事件</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_4-组件间通信3-事件总线" class="sidebar-link">4. 组件间通信3: 事件总线</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_5-组件间通信4-v-model" class="sidebar-link">5. 组件间通信4: v-model</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_6-组件间通信5-sync-属性修饰符" class="sidebar-link">6. 组件间通信5: sync 属性修饰符</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_7-组件间通信6-attrs与-listeners" class="sidebar-link">7. 组件间通信6: $attrs与$listeners</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_8-组件间通信7-children与-parent" class="sidebar-link">8. 组件间通信7: $children与$parent</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_9-组件间通信8-provide与inject" class="sidebar-link">9. 组件间通信8: provide与inject</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_10-组件间通信9-vuex" class="sidebar-link">10. 组件间通信9: vuex</a></li><li class="sidebar-sub-header"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_详版.html#_11-作用域插槽slot-scope" class="sidebar-link">11. 作用域插槽slot-scope</a></li></ul></li><li><a href="/gshop-client_docs/chapter3/05_vue组件间通信_简版.html" class="sidebar-link">vue组件间通信_简版</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>笔记列表</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件间通信详解"><a href="#组件间通信详解" class="header-anchor">#</a> 组件间通信详解</h1> <h2 id="_1-组件间多种通信方式"><a href="#_1-组件间多种通信方式" class="header-anchor">#</a> 1. 组件间多种通信方式:</h2> <ol><li>组件间通信1: props</li> <li>组件间通信2: vue自定义事件</li> <li>组件间通信3: 事件总线</li> <li>组件间通信4: v-model</li> <li>组件间通信5: .sync 属性修饰符</li> <li>组件间通信6: $attrs与$listeners</li> <li>组件间通信7: $children与$parent</li> <li>组件间通信8: provide与inject</li> <li>组件间通信9: vuex</li> <li>组件间通信10: 作用域插槽slot-scope</li></ol> <h2 id="_2-组件间通信最基本方式-props"><a href="#_2-组件间通信最基本方式-props" class="header-anchor">#</a> 2. 组件间通信最基本方式: props</h2> <ul><li>用来实现父子之间相互通信的最基本方式, 也是用得最多的方式
<ul><li>父 ==&gt; 子, 传递的是非函数类型的属性</li> <li>子 ==&gt; 父, 传递的是函数类型的属性</li></ul></li> <li>问题: 其它关系的组件使用props就会比较麻烦</li></ul> <h2 id="_3-组件间通信2-vue自定义事件"><a href="#_3-组件间通信2-vue自定义事件" class="header-anchor">#</a> 3. 组件间通信2: vue自定义事件</h2> <h3 id="_1-原生dom事件"><a href="#_1-原生dom事件" class="header-anchor">#</a> 1) 原生DOM事件</h3> <ul><li>绑定原生DOM事件监听的2种情况
<ul><li>在html标签上绑定DOM事件名的监听</li> <li>在组件标签上绑定DOM事件名的监听, 事件绑定在组件的根标签上</li></ul></li> <li>当用户操作对应的界面时, 浏览器就会自动创建并封闭包含相关数据的事件对象, 分发对应的事件, 从而触发事件监听回调函数调用</li> <li>事件对象event, 本质是 &quot;事件数据对象&quot;</li> <li>event对象内的数据属性: target / offsetX / offsetY / keyCode等</li> <li>$event就是浏览器创建的event对象, 默认传递给事件监听回调函数的就是它</li></ul> <h3 id="_2-vue自定义事件"><a href="#_2-vue自定义事件" class="header-anchor">#</a> 2) vue自定义事件</h3> <ul><li>绑定vue自定义事件监听
<ul><li>只能在组件标签上绑定</li> <li>事件名是任意的, 可以与原生DOM事件名相同</li></ul></li> <li>只有当执行$emit('自定义事件名', data)时分发自定义事件, 才会触发自定义事件监听函数调用</li> <li>$event: 就是分发自定义事件时指定的data数据</li> <li>$event可以是任意类型, 甚至可以没有</li> <li>用来实现子向父组件通信, 功能相当于函数类型的props</li></ul> <h2 id="_4-组件间通信3-事件总线"><a href="#_4-组件间通信3-事件总线" class="header-anchor">#</a> 4. 组件间通信3: 事件总线</h2> <ul><li><p>理解:</p> <ul><li>Vue原型对象上有3个事件处理的方法: $on() / $emit() / $off()</li> <li>组件对象的原型对象的原型对象是Vue的原型对象: 组件对象可以直接访问Vue原型对象上的方法</li></ul></li> <li><p>实现任意组件间通信</p></li> <li><p>编码实现:</p> <ul><li>将入口js中的vm作为全局事件总线对象:</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   	<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">this</span>
   <span class="token punctuation">}</span>
</code></pre></div><ul><li><p>分发事件/传递数据的组件: this.$bus.$emit('eventName', data)</p></li> <li><p>处理事件/接收数据的组件: this.$bus.$on('eventName', (data) =&gt; {})</p></li></ul> <h2 id="_5-组件间通信4-v-model"><a href="#_5-组件间通信4-v-model" class="header-anchor">#</a> 5. 组件间通信4: v-model</h2> <h3 id="_1-原生input上的本质"><a href="#_1-原生input上的本质" class="header-anchor">#</a> 1) 原生input上的本质:</h3> <p>动态的value属性与原生input事件监听</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name2=$event.target.value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-组件标签上的本质"><a href="#_2-组件标签上的本质" class="header-anchor">#</a> 2) 组件标签上的本质:</h3> <p>动态的value属性与自定义input事件监听</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父组件: </span>
<span class="token operator">&lt;</span>CustomInput <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;name4&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;name4=$event&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// 子组件</span>
props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;value&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;$emit('input', $event.target.value)&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="_3-利用v-model能做什么"><a href="#_3-利用v-model能做什么" class="header-anchor">#</a> 3) 利用v-model能做什么?</h3> <ul><li>v-model不仅能实现原生标签上的<strong>双向数据绑定</strong>, 也能实现父子组件间数据<strong>双向通信(同步)</strong></li> <li>应用
<ul><li>一般用于封装带表单项的复用性组件</li> <li>elment-ui中: Input/CheckBox/Radio/Select等表单项组件都封装了v-model</li></ul></li></ul> <h2 id="_6-组件间通信5-sync-属性修饰符"><a href="#_6-组件间通信5-sync-属性修饰符" class="header-anchor">#</a> 6. 组件间通信5: sync 属性修饰符</h2> <h3 id="_1-理解本质"><a href="#_1-理解本质" class="header-anchor">#</a> 1) 理解本质:</h3> <p>绑定一个自定义事件监听, 用来接收子组件分发事件携带的最新数据来更新父组件的数据</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:money.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">:money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_2-利用sync能做什么呢"><a href="#_2-利用sync能做什么呢" class="header-anchor">#</a> 2) 利用sync能做什么呢?</h3> <ul><li>在原有父向子的基础上加上子向父通信</li> <li>应用
<ul><li>常用于封装可复用组件(需要更新父组件数据)
<ul><li>v-model一般用于带表单项的组件</li> <li>sync一般用于不带表单项标签的组件</li></ul></li> <li>element-ui中: Dialog就利用sync来实现组件的隐藏</li></ul></li></ul> <h2 id="_7-组件间通信6-attrs与-listeners"><a href="#_7-组件间通信6-attrs与-listeners" class="header-anchor">#</a> 7. 组件间通信6: $attrs与$listeners</h2> <h3 id="_1-理解"><a href="#_1-理解" class="header-anchor">#</a> 1) 理解:</h3> <ul><li><p>$attrs: 排除props声明, class, style的所有组件标签属性组成的对象</p></li> <li><p>$listeners: 级组件标签绑定的所有自定义事件监听的对象</p></li> <li><p>v-bind: 的特别使用</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ id: someProp, <span class="token punctuation">'</span>other-attr<span class="token punctuation">'</span>: otherProp }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>v-on: 的特别使用:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ mousedown: doThis, mouseup: doThat }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>一般: v-bind与$attrs配合使用, v-on与$listeners配合使用</p></li></ul> <h3 id="_2-使用它们能做什么呢"><a href="#_2-使用它们能做什么呢" class="header-anchor">#</a> 2) 使用它们能做什么呢?</h3> <ul><li>在封装可复用组件时: HintButton
<ul><li>从父组件中接收不定数量/名称的属性或事件监听</li> <li>在组件内部, 传递给它的子组件</li></ul></li> <li>element-ui中: Input就使用了v-bind与$attrs来接收不定的属性传递给input</li></ul> <h3 id="_3-扩展双击监听"><a href="#_3-扩展双击监听" class="header-anchor">#</a> 3) 扩展双击监听:</h3> <ul><li><p><code>@dblclick=&quot;add2&quot;</code>
绑定是自定义事件监听, 而el-button内部并没处理(没有绑定对应的原生监听, 没有分发自定义事件)
双击时, 不会有响应</p></li> <li><p><code>@dblclick.native=&quot;add2&quot;</code>
绑定的是原生的DOM事件监听, 最终是给组件的根标签a绑定的原生监听
当双击a内部的button能响应, 因为事件有冒泡</p></li></ul> <h2 id="_8-组件间通信7-children与-parent"><a href="#_8-组件间通信7-children与-parent" class="header-anchor">#</a> 8. 组件间通信7: $children与$parent</h2> <h3 id="_1-理解-2"><a href="#_1-理解-2" class="header-anchor">#</a> 1) 理解:</h3> <ul><li>$children: 所有直接子组件对象的数组, 利用它可以更新多个子组件的数据</li> <li>$parent: 父组件对象, 从而可以更新父组件的数据</li> <li>$refs: 包含所有有ref属性的标签对象或组件对象的容器对象</li></ul> <h3 id="_2-利用它们能做什么"><a href="#_2-利用它们能做什么" class="header-anchor">#</a> 2) 利用它们能做什么?</h3> <ul><li>能方便的得到子组件/后代组件/父组件/祖辈组件对象, 从而更新其data或调用其方法</li> <li>官方建议不要大量使用, 优先使用props和event</li> <li>在一些UI组件库定义高复用组件时会使用$children和$parent, 如Carousel组件</li></ul> <h3 id="_3-扩展-mixin"><a href="#_3-扩展-mixin" class="header-anchor">#</a> 3) 扩展: mixin</h3> <ul><li>多个组件有部分相同的js代码如何复用 ?</li> <li>答: 利用vue的mixin技术实现</li> <li>本质: 实现Vue组件的JS代码复用, 简化编码的一种技术</li></ul> <h2 id="_9-组件间通信8-provide与inject"><a href="#_9-组件间通信8-provide与inject" class="header-anchor">#</a> 9. 组件间通信8: provide与inject</h2> <h3 id="_1-理解-3"><a href="#_1-理解-3" class="header-anchor">#</a> 1) 理解</h3> <div class="language- extra-class"><pre><code>用来实现祖孙组件直接通信
在祖组件中通过provide配置向后代组件提供数据
在后代组件中通过inject配置来读取数据
</code></pre></div><h3 id="_2-注意"><a href="#_2-注意" class="header-anchor">#</a> 2) 注意:</h3> <div class="language- extra-class"><pre><code>不太建议在应用开发中使用, 一般用来封装vue插件
provide提供的数据本身不是响应式的 ==&gt; 父组件更新了数据, 后代组件不会变化
provide提供的数据对象内部是响应式的 ==&gt; 父组件更新了数据, 后代组件也会变化
</code></pre></div><h3 id="_3-应用"><a href="#_3-应用" class="header-anchor">#</a> 3) 应用:</h3> <div class="language- extra-class"><pre><code>element-ui中的Form组件中使用了provide和inject
</code></pre></div><h2 id="_10-组件间通信9-vuex"><a href="#_10-组件间通信9-vuex" class="header-anchor">#</a> 10. 组件间通信9: vuex</h2> <ol><li><p>实现任意组件间通信</p></li> <li><p>Vuex 是一个专为 Vue 应用程序设计的管理多组件共享状态数据的 Vue 插件
任意组件都可以读取到Vuex中store的state对象中的数据</p> <p>任意组件都可以通过dispatch()或commit()来触发store去更新state中的数据</p> <p>一旦state中的数据发生变化, 依赖于这些数据的组件就会自动更新</p></li></ol> <h2 id="_11-作用域插槽slot-scope"><a href="#_11-作用域插槽slot-scope" class="header-anchor">#</a> 11. 作用域插槽slot-scope</h2> <h3 id="_1-什么情况下使用作用域插槽"><a href="#_1-什么情况下使用作用域插槽" class="header-anchor">#</a> 1) 什么情况下使用作用域插槽?</h3> <ul><li><p>父组件需要向子组件传递标签结构内容</p></li> <li><p>但决定父组件传递怎样标签结构的数据在子组件中</p></li></ul> <h3 id="_2-编码"><a href="#_2-编码" class="header-anchor">#</a> 2) 编码</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">!:</span></span> <span class="token attr-name"><span class="token namespace">子组件:</span></span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:$index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">!:</span></span> <span class="token attr-name"><span class="token namespace">父组件:</span></span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{row, $index}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{$index+1}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> <span class="token entity named-entity" title="&amp;nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&amp;nbsp;">&amp;nbsp;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> $index%2===1 ? <span class="token string">'blue'</span> <span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>{{row.text}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3-应用-2"><a href="#_3-应用-2" class="header-anchor">#</a> 3) 应用</h3> <ul><li>对于封装列表之类的组件特别需要</li> <li>element-ui中: Table组件中就用到了slot-scope</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/gshop-client_docs/chapter3/04_vee-validate 2.x.html" class="prev">
        vee-validate 2.x使用教程
      </a></span> <span class="next"><a href="/gshop-client_docs/chapter3/05_vue组件间通信_简版.html">
        vue组件间通信_简版
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gshop-client_docs/assets/js/app.6cbae8ec.js" defer></script><script src="/gshop-client_docs/assets/js/2.f8b636a9.js" defer></script><script src="/gshop-client_docs/assets/js/39.a7e2c68a.js" defer></script>
  </body>
</html>
